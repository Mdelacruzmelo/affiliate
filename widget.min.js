var mainUrl="https://dotravel.com/",affUrl="https://cdn.jsdelivr.net/gh/devDotravel/affiliate/";function insertData(e){fetchJSONFile(mainUrl+"/affiliate/widget/"+e,function(){insertProducts(data,e),insertDoTravelCSS(data,e),removeLinkContainer(data,e)})}function getDoTravelGeneralCSS(){var e=document.createElement("link");e.href=affUrl+"dotravelGeneral.min.css",e.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(e)}function getJsonCSS(e){e.setting.forEach(function(e){document.querySelectorAll(".DoTravel-Container")[0].style.backgroundColor=e.backgroundColor;for(var t=document.querySelectorAll(".DoTravel-Button-Show"),r=0;r<t.length;r++)t[r].style.backgroundColor=e.buttonBackground,t[r].style.color=e.buttonColor;var a=document.querySelectorAll(".DoTravel-Product-Price");for(r=0;r<a.length;r++)a[r].style.color=e.priceColor;var n=document.querySelectorAll(".DoTravel-Product-Offer-Price");for(r=0;r<n.length;r++)n[r].style.color=e.offerPriceColor;for(a=document.querySelectorAll(".DoTravel-Text-Dashed"),r=0;r<a.length;r++)a[r].style.color=e.dashedPriceColor;var l=document.querySelectorAll(".DoTravel-Product-Info");for(r=0;r<l.length;r++)l[r].style.color=e.textColor})}function insertDoTravelCSS(e){console.log(e);var t=e.settings.shape,r=document.createElement("link"),a=e.settings.color_scheme;if(a=parseInt(a),"horizontal"==t)switch(a){case 1:r.href=affUrl+"dotravelT1H.min.css";break;case 2:r.href=affUrl+"dotravelT2H.min.css";break;case 3:r.href=affUrl+"dotravelT3H.min.css"}else if("vertical"==t)switch(a){case 1:r.href=affUrl+"dotravelT1V.min.css";break;case 2:r.href=affUrl+"dotravelT2V.min.css";break;case 3:r.href=affUrl+"dotravelT3V.min.css"}r.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(r)}function fetchJSONFile(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&200===r.status&&(data=JSON.parse(r.responseText),t&&t(data))},r.open("GET",e),r.send()}function insertProducts(e,t){var r=document.createElement("span");e.products.forEach(function(t,a){var n=document.createElement("span");n.setAttribute("class","DoTravel-Product-Title"),n.innerHTML=t.title;var l=document.createElement("p");l.setAttribute("class","DoTravel-Product-Description"),l.innerHTML=t.summary;var o=document.createElement("a");o.setAttribute("class","DoTravel-Button-Show"),o.setAttribute("href",t.url),o.setAttribute("target","_blank"),o.innerHTML="Book Now";var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("width","14"),i.setAttribute("height","14"),i.setAttribute("viewBox","0 -10 512 512");var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttributeNS(null,"d","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm57.1 350.1L224.9 294c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v137.7l63.5 46.2c5.4 3.9 6.5 11.4 2.6 16.8l-28.2 38.8c-3.9 5.3-11.4 6.5-16.8 2.6z"),c.setAttribute("fill","#24A393"),i.appendChild(c);var s=document.createElement("span");s.setAttribute("class","DoTravel-Product-Duration"),document.createElement("i").setAttribute("class","DoTravel-Icon-Clock");var d=document.createElement("span");d.setAttribute("class","DoTravel-Span-Duration"),d.innerHTML=t.duration,s.appendChild(i),s.appendChild(d);var u=document.createElement("span");u.setAttribute("class","DoTravel-Rating-Stars");var m=t.rating;console.log(m);var v="";m>4.49?v+="&#9733 &#9733 &#9733 &#9733 &#9733":m>3.49?v+="&#9733 &#9733 &#9733 &#9733 &#9734":m>2.49?v+="&#9733 &#9733 &#9733 &#9734 &#9734":m>1.49?v+="&#9733 &#9733 &#9734 &#9734 &#9734":m>.49?v+="&#9733 &#9734 &#9734 &#9734 &#9734":m<.49&&(v+="&#9734 &#9734 &#9734 &#9734 &#9734"),u.innerHTML=v;var p=document.createElement("span");p.setAttribute("class","DoTravel-Rating-Container"),p.appendChild(u);var h=document.createElement("span");if(h.setAttribute("class","DoTravel-Product-Price"),h.innerHTML=t.price+"  "+t.currency,void 0!==t.offerPrice){var f=document.createElement("span");f.setAttribute("class","DoTravel-Product-Offer-Price"),f.innerHTML=t.offerPrice+"  "+t.currency,h.classList.add("DoTravel-Text-Dashed")}var T=document.createElement("span");T.setAttribute("class","DoTravel-Product-Reviews");var g="";g=t.reviews>1?"reviews":"review",T.innerHTML=t.reviews+" "+g;var C=document.createElement("div");C.setAttribute("class","DoTravel-Product-Image"),C.setAttribute("style","background-image:url("+t.img+");");var b=document.createElement("a");b.setAttribute("href",t.url),b.setAttribute("target","_blank"),b.appendChild(C);var D=document.createElement("div");D.setAttribute("class","DoTravel-Product-Info"),D.appendChild(n);var A=document.createElement("div");A.setAttribute("class","DoTravel-Container-RRD"),A.appendChild(p),A.appendChild(T),A.appendChild(s),D.appendChild(A),e.settings.summary&&D.appendChild(l),D.appendChild(o),void 0!==t.offerPrice&&D.appendChild(f),D.appendChild(h);var w=document.createElement("span");w.setAttribute("class","DoTravel-Span-Container"),w.appendChild(b),w.appendChild(D);var y=document.createElement("a");y.setAttribute("class","DoTravel-Product-Container"),y.setAttribute("href",t.url),y.setAttribute("target","_blank"),y.setAttribute("id","DoTravel-Product-"+(a+1)),y.appendChild(w);var E=document.createElement("div");E.setAttribute("class","DoTravel-Clearfix"),y.appendChild(E),document.getElementById("DoTravel-Campaign").classList.add("DoTravel-Container"),1==e.settings.quantity&&document.getElementById("DoTravel-Campaign").setAttribute("style","flex-direction:column"),r.setAttribute("class","DoTravel-Campaign-Container"),r.appendChild(y)});var a=document.createElement("span");a.setAttribute("class","DoTravel-Powered-By"),1==e.settings.quantity?a.classList.add("DoTravel-Powered-1P"):2==e.settings.quantity?a.classList.add("DoTravel-Powered-2P"):3==e.settings.quantity&&a.classList.add("DoTravel-Powered-3P"),a.innerHTML="Powered by DoTravel",r.appendChild(a),document.getElementById("DoTravel-Campaign").appendChild(r),document.getElementById("DoTravel-Campaign").id="DoTravel-Campaign-"+t}function removeLinkContainer(e,t){var r=document.getElementById("DoTravel-Campaign-"+t),a=r.parentNode;a.parentNode.insertBefore(r,a.nextSibling),a.parentElement.removeChild(a)}function checkMetaViewPort(){if(0==document.querySelectorAll('meta[name="viewport"][content="width=device-width, initial-scale=1.0"]').length){var e=document.createElement("meta");e.name="viewport",e.content="width=device-width, initial-scale=1.0",document.getElementsByTagName("head")[0].appendChild(e)}}checkMetaViewPort();var id=document.currentScript.getAttribute("id");insertData(id);
