var mainUrl="https://dotravel.com",affUrl="https://cdn.jsdelivr.net/gh/devDotravel/affiliate/";function insertData(e){fetchJSONFile(mainUrl+"/affiliate/widget/"+e,function(){insertProducts(data,e),insertDoTravelCSS(data,e),removeLinkContainer(data,e)})}function getDoTravelGeneralCSS(){var e=document.createElement("link");e.href=affUrl+"/web/affiliate/css/DoTravel-General.css",e.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(e)}function getJsonCSS(e){e.setting.forEach(function(e){document.querySelectorAll(".DoTravel-Container")[0].style.backgroundColor=e.backgroundColor;for(var t=document.querySelectorAll(".DoTravel-Button-Show"),r=0;r<t.length;r++)t[r].style.backgroundColor=e.buttonBackground,t[r].style.color=e.buttonColor;var a=document.querySelectorAll(".DoTravel-Product-Price");for(r=0;r<a.length;r++)a[r].style.color=e.priceColor;var n=document.querySelectorAll(".DoTravel-Product-Offer-Price");for(r=0;r<n.length;r++)n[r].style.color=e.offerPriceColor;for(a=document.querySelectorAll(".DoTravel-Text-Dashed"),r=0;r<a.length;r++)a[r].style.color=e.dashedPriceColor;var l=document.querySelectorAll(".DoTravel-Product-Info");for(r=0;r<l.length;r++)l[r].style.color=e.textColor})}function insertDoTravelCSS(e){console.log(e);var t=e.settings.shape,r=document.createElement("link"),a=e.settings.color_scheme;if(a=parseInt(a),"horizontal"==t)switch(a){case 1:r.href=affUrl+"/web/affiliate/css/DoTravel-T1H.css";break;case 2:r.href=affUrl+"/web/affiliate/css/DoTravel-T2H.css";break;case 3:r.href=affUrl+"/web/affiliate/css/DoTravel-T3H.css"}else if("vertical"==t)switch(a){case 1:r.href=affUrl+"/web/affiliate/css/DoTravel-T1V.css";break;case 2:r.href=affUrl+"/web/affiliate/css/DoTravel-T2V.css";break;case 3:r.href=affUrl+"/web/affiliate/css/DoTravel-T3V.css"}r.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(r)}function fetchJSONFile(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&200===r.status&&(data=JSON.parse(r.responseText),t&&t(data))},r.open("GET",e),r.send()}function insertProducts(y,e){var E=document.createElement("span");y.products.forEach(function(e,t){var r=document.createElement("span");r.setAttribute("class","DoTravel-Product-Title"),r.innerHTML=e.title;var a=document.createElement("p");a.setAttribute("class","DoTravel-Product-Description"),a.innerHTML=e.summary;var n=document.createElement("a");n.setAttribute("class","DoTravel-Button-Show"),n.setAttribute("href",e.url+"&referral_url="+window.location.href),n.setAttribute("target","_blank"),n.innerHTML="Book Now";var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("width","14"),l.setAttribute("height","14"),l.setAttribute("viewBox","0 -10 512 512");var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttributeNS(null,"d","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm57.1 350.1L224.9 294c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v137.7l63.5 46.2c5.4 3.9 6.5 11.4 2.6 16.8l-28.2 38.8c-3.9 5.3-11.4 6.5-16.8 2.6z"),o.setAttribute("fill","#24A393"),l.appendChild(o);var i=document.createElement("span");i.setAttribute("class","DoTravel-Product-Duration"),document.createElement("i").setAttribute("class","DoTravel-Icon-Clock");var s=document.createElement("span");s.setAttribute("class","DoTravel-Span-Duration"),s.innerHTML=e.duration,i.appendChild(l),i.appendChild(s);var c=document.createElement("span");c.setAttribute("class","DoTravel-Rating-Stars");var d=e.rating;console.log(d);var u="";4.49<d?u+="&#9733 &#9733 &#9733 &#9733 &#9733":3.49<d?u+="&#9733 &#9733 &#9733 &#9733 &#9734":2.49<d?u+="&#9733 &#9733 &#9733 &#9734 &#9734":1.49<d?u+="&#9733 &#9733 &#9734 &#9734 &#9734":.49<d?u+="&#9733 &#9734 &#9734 &#9734 &#9734":d<.49&&(u+="&#9734 &#9734 &#9734 &#9734 &#9734"),c.innerHTML=u;var v=document.createElement("span");v.setAttribute("class","DoTravel-Rating-Container"),v.appendChild(c);var m=document.createElement("span");if(m.setAttribute("class","DoTravel-Product-Price"),m.innerHTML=e.price+"  "+e.currency,void 0!==e.offerPrice){var p=document.createElement("span");p.setAttribute("class","DoTravel-Product-Offer-Price"),p.innerHTML=e.offerPrice+"  "+e.currency,m.classList.add("DoTravel-Text-Dashed")}var f=document.createElement("span");f.setAttribute("class","DoTravel-Product-Reviews");var h="";h=1<e.reviews?"reviews":"review",f.innerHTML=e.reviews+" "+h;var T=document.createElement("div");T.setAttribute("class","DoTravel-Product-Image"),T.setAttribute("style","background-image:url("+e.img+");");var g=document.createElement("a");g.setAttribute("href",e.url),g.setAttribute("target","_blank"),g.appendChild(T);var b=document.createElement("div");b.setAttribute("class","DoTravel-Product-Info"),b.appendChild(r);var D=document.createElement("div");D.setAttribute("class","DoTravel-Container-RRD"),D.appendChild(v),v.appendChild(f),D.appendChild(i),b.appendChild(D),y.settings.summary&&b.appendChild(a),b.appendChild(n),void 0!==e.offerPrice&&b.appendChild(p),b.appendChild(m);var C=document.createElement("span");C.setAttribute("class","DoTravel-Span-Container"),C.appendChild(g),C.appendChild(b);var w=document.createElement("a");w.setAttribute("class","DoTravel-Product-Container"),w.setAttribute("href",e.url),w.setAttribute("target","_blank"),w.setAttribute("id","DoTravel-Product-"+(t+1)),w.appendChild(C);var A=document.createElement("div");A.setAttribute("class","DoTravel-Clearfix"),w.appendChild(A),document.getElementById("DoTravel-Campaign").classList.add("DoTravel-Container"),1==y.settings.quantity&&document.getElementById("DoTravel-Campaign").setAttribute("style","flex-direction:column"),E.setAttribute("class","DoTravel-Campaign-Container"),E.appendChild(w)});var t=document.createElement("span");t.setAttribute("class","DoTravel-Powered-By"),1==y.settings.quantity?t.classList.add("DoTravel-Powered-1P"):2==y.settings.quantity?t.classList.add("DoTravel-Powered-2P"):3==y.settings.quantity&&t.classList.add("DoTravel-Powered-3P"),t.innerHTML="Powered by DoTravel",E.appendChild(t),document.getElementById("DoTravel-Campaign").appendChild(E),document.getElementById("DoTravel-Campaign").id="DoTravel-Campaign-"+e}function removeLinkContainer(e,t){var r=document.getElementById("DoTravel-Campaign-"+t),a=r.parentNode;a.parentNode.insertBefore(r,a.nextSibling),a.parentElement.removeChild(a)}function checkMetaViewPort(){if(0==document.querySelectorAll('meta[name="viewport"][content="width=device-width, initial-scale=1.0"]').length){var e=document.createElement("meta");e.name="viewport",e.content="width=device-width, initial-scale=1.0",document.getElementsByTagName("head")[0].appendChild(e)}}checkMetaViewPort();var id=document.currentScript.getAttribute("id");insertData(id);
